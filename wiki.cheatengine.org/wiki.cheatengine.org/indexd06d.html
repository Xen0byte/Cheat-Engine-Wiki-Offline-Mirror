<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&action=edit&section=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Jun 2021 18:01:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>View source for Tutorials:Lua:ObjectOriented - Cheat Engine</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Tutorials:Lua:ObjectOriented","wgTitle":"Tutorials:Lua:ObjectOriented","wgCurRevisionId":6970,"wgRevisionId":0,"wgArticleId":1894,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Tutorials:Lua:ObjectOriented","wgRelevantArticleId":1894,"wgRequestId":"968ef6e96cd117303c60c145","wgCSPNonce":false,"wgIsProbablyEditable":true,"wgRelevantPageIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@0tffind",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});RLPAGEMODULES=["mediawiki.action.edit.collapsibleFooter","site","mediawiki.page.startup","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.js"];mw.loader.load(RLPAGEMODULES);});</script>
<link rel="stylesheet" href="loadc219.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="load2c8d.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<meta name="generator" content="MediaWiki 1.32.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&amp;action=edit"/>
<link rel="edit" title="Edit" href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&amp;action=edit"/>
<link rel="shortcut icon" href="https://wiki.cheatengine.org/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.cheatengine.org/opensearch_desc.php" title="Cheat Engine (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.cheatengine.org/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/publicdomain/"/>
<link rel="alternate" type="application/atom+xml" title="Cheat Engine Atom feed" href="https://wiki.cheatengine.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({google_ad_client: "ca-pub-2965724121945476", enable_page_level_ads: true });</script>
<!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="http://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  },
  "theme": "classic",
  "position": "top",
  "content": {
    "message": "This site makes use of the Google services Adsense Analytics, and other third party advertisers which use Cookies to collect data about you, and which will be shared with third parties. By continuing to use this site you consent to the storage of these cookies",
    "dismiss": "I Agree",
    "href": "http://www.google.com/intl/en/policies/privacy/partners/"
  }
})});
</script>
<!-- End Cookie Consent plugin -->

<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tutorials_Lua_ObjectOriented rootpage-Tutorials_Lua_ObjectOriented skin-vector action-edit">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">View source for Tutorials:Lua:ObjectOriented</h1>			<div id="bodyContent" class="mw-body-content">
								<div id="contentSub">‚Üê <a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented" title="Tutorials:Lua:ObjectOriented">Tutorials:Lua:ObjectOriented</a></div>
				<div id="jump-to-nav"></div>				<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
				<a class="mw-jump-link" href="#p-search">Jump to search</a>
				<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>You must confirm your email address before editing pages.
Please set and validate your email address through your <a href="https://wiki.cheatengine.org/index.php?title=Special:Preferences" title="Special:Preferences">user preferences</a>.
</p>
</div>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace" lang="en" dir="ltr" name="wpTextbox1">== Metatables ==

Here are some useful links for reference:

* [http://lua-users.org/wiki/MetamethodsTutorial MetamethodsTutorial]
* [http://nova-fusion.com/2011/06/30/lua-metatables-tutorial/ metatables tutorial]

Metatables allow you to specify a second table that will handle certain actions performed
on your table.  This is a mostly hidden reference, though you can access it with `getmetatable(tbl)`.
This lets you define a table like a class with methods and default properties and assign
it as a metatable to instances without setting the functions as properties on each instance.

It also allows you to do things like intercept calls to your table as a function and to
overload operators.

=== __index ===

The most useful element of a metatable is the `__index` property.  If specified as a table, then any
calls to properties that don't exist on your instance will attempt to be accessed on that table.
Here's an example where we setup `Rectangle` as a class with the `calculateArea` method.  By setting
`Rectangle` as the metatable on our `rect` table, we can call `rect:calculateArea` and it will call
`Rectangle.calculateArea(rect)`:

&lt;pre>
Rectangle = {}

function Rectangle:calculateArea()
  return self.length * self.width
end

local rect = { length = 7, width = 9 }
setmetatable(rect, { __index = Rectangle })

print('Area: '..tostring(rect:calculateArea()))
&lt;/pre>

Another way to do it is to set it to a function.  This function will take the table instance
you are accessing a property on and the property key as arguments and should return the value.
This is only called when a key does not exist directly on the table itself.  A different way
to accomplish the same thing as above would be to use a function that just returns the
property value on the Rectangle table:

&lt;pre>setmetatable(rect, { __index = function(tbl, key) return Rectangle[key] end })&lt;/pre>

=== __newindex ===

Similar is the metamethod `__newindex` which is called when setting a property on your table
that doesn't already exist.  This is much like a property write accessor in object oriented
languages.  It takes the table it's called on, the property key, and the value that is
being set.  For instance, this would log any attempts to access non-existing properties on
the rect object and not actually set them, preventing code from adding properties that
don't exist:

&lt;pre>
Rectangle = {}

function Rectangle:calculateArea()
  return self.length * self.width
end

local rect = { length = 7, width = 9 }
setmetatable(rect, {
  __index = Rectangle,
  __newindex =
    function(tbl, key, value)
      print('Rectangle: Attempt to set "'..key..'" property to '..tostring(value))
    end
  })

rect.length = 3
print('length changed: '..tostring(rect:calculateArea()))

rect.nothing = 5
print('rect.nothing was not set: '..tostring(rect.nothing))
&lt;/pre>

=== __call ===

`__call` can be set to a function when your table is used like a function.  This 
lets you write clean code for creating a new instance of your `class` instead of
manually setting the metatable for an object each time.  Here's an example that
lets us create a new Rectangle by either calling `Rectangle.new(length, width)` or
simply `Rectangle(length, width)`:

&lt;pre>
Rectangle = {}

function Rectangle:calculateArea() return self.length * self.width end

-- create a new instance and assign Rectangle as the metatable (like a class)
function Rectangle.new(length, width)
  local obj = { length = length, width = width }
  setmetatable(obj, { __index = Rectangle })
  return obj
end

-- allow Rectangle table to be called like a function
setmetatable(Rectangle, {
    __call = function(tbl, length, width)
        -- tbl will be Rectangle
        return Rectangle.new(length, width)
      end
  })

local rect1 = Rectangle.new(7, 9)
local rect2 = Rectangle(3, 4)

print('rect1: '..tostring(rect1:calculateArea()))
print('rect2: '..tostring(rect2:calculateArea()))
&lt;/pre>

=== __lt ===

'''__lt''' is a function used for less than comparison, and for greater than comparison by
reversing the arguments.  It is really useful for sorting arrays.  Here we sort the
rectangles array based on their area:

&lt;pre>
Rectangle = {}

function Rectangle:calculateArea() return self.length * self.width end

function Rectangle.new(length, width)
  local obj = { length = length, width = width }
  setmetatable(obj, {
      __index = Rectangle,
      __lt = function(a, b) return a:calculateArea() &lt; b:calculateArea() end
    })
  return obj
end

setmetatable(Rectangle, {
    __call = function(tbl, length, width)
        -- tbl will be Rectangle
        return Rectangle.new(length, width)
      end
  })

local rectangles = { Rectangle(2, 5), Rectangle(7, 9), Rectangle(1, 3),
  Rectangle(3, 4), Rectangle(9, 10), Rectangle(2, 1) }
table.sort(rectangles)
for i,v in ipairs(rectangles) do
  print(tostring(i)..": "..tostring(v:calculateArea()).." in "..tostring(v.length).."x"..tostring(v.width))
end
&lt;/pre>

=== other operators ===

* '''__add''' - Changes the behavior of the '+' operator, i.e. 'rect1 + rect2'
* '''__sub''' - Changes the behavior of the '-' operator, i.e. 'rect1 - rect2'
* '''__mul''' - Changes the behavior of the '*' operator, i.e. 'rect1 * rect2'
* '''__div''' - Changes the behavior of the '/' operator, i.e. 'rect1 / rect2'
* '''__mod''' - Changes the behavior of the '%' operator, i.e. 'rect1 % rect2'
* '''__unm''' - Changes the behavior of the unary minus '-' operator, i.e. '-rect2'
* '''__le''' - Changes the behavior of the '&lt;=' operator (and '>=' by reversing args)
* '''__concat''' - Changes the behavior of the '..' operator, i.e. 'rect1..rect2' or 'rect1..string'
* '''__eq''' - Changes the behavior of the '==' operator (and '~='), i.e. 'rect1 == rect2'
* '''__tostring''' - Not an operator, but can change the results when using print() or tostring(), i.e. 'print(rect1)'

For example you may want to override '''__add''' and return a new Rectangle object with the length and width of
two rectangles added together, or to expand both the length and width when you add a number to it.
You may want to override '''__tostring''' and the concat operator '''..''' so that you can easily print out your
objects:

&lt;pre>
Rectangle = {}

function Rectangle:calculateArea() return self.length * self.width end

function Rectangle.new(length, width)
  local obj = { length = length, width = width }
  setmetatable(obj, {
      __index = Rectangle,
      __add = function(a, b)
        if type(b) == 'number' then return Rectangle(a.length + b, a.width + b) end
        return Rectangle(a.length + b.length, a.width + b.width)
      end,
      __concat = function(a, b)
        return tostring(a)..tostring(b)
      end,
      __tostring = function(a)
        return "[Rect("..tostring(a.length)..","..tostring(a.width)..")]"
      end
    })
  return obj
end

setmetatable(Rectangle, {
    __call = function(tbl, length, width)
        -- tbl will be Rectangle
        return Rectangle.new(length, width)
      end
  })

local rect1 = Rectangle(3, 4)
local rect2 = Rectangle(7, 9)
local rectAdded = rect1 + rect2 -- add lengths and widths
local rectExpanded = rect2 + 5 -- add 5 to length and width
print('rectAdded is '..rectAdded..' and rectExpanded is '..rectExpanded)
&lt;/pre>
</textarea><div class="templatesUsed"></div><p id="mw-returnto">Return to <a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented" title="Tutorials:Lua:ObjectOriented">Tutorials:Lua:ObjectOriented</a>.</p>
<br><br><center><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- Wiki, bottom ad --><ins class="adsbygoogle"     style="display:inline-block;width:468px;height:60px"     data-ad-client="ca-pub-2965724121945476"     data-ad-slot="2855292098"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented">https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-anonuserpage">Not logged in</li><li id="pt-anontalk"><a href="https://wiki.cheatengine.org/index.php?title=Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n">Talk</a></li><li id="pt-anoncontribs"><a href="https://wiki.cheatengine.org/index.php?title=Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y">Contributions</a></li><li id="pt-createaccount"><a href="https://wiki.cheatengine.org/index.php?title=Special:CreateAccount&amp;returnto=Tutorials%3ALua%3AObjectOriented&amp;returntoquery=action%3Dedit%26section%3D2" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.cheatengine.org/index.php?title=Special:UserLogin&amp;returnto=Tutorials%3ALua%3AObjectOriented&amp;returntoquery=action%3Dedit%26section%3D2" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://wiki.cheatengine.org/index.php?title=Talk:Tutorials:Lua:ObjectOriented&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible"><span><a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented">Read</a></span></li><li id="ca-edit" class="collapsible selected"><span><a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&amp;action=edit" title="Edit this page">Edit</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://wiki.cheatengine.org/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Cheat Engine" title="Search Cheat Engine [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="https://wiki.cheatengine.org/index.php?title=Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage-description"><a href="https://wiki.cheatengine.org/index.php?title=Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="https://wiki.cheatengine.org/index.php?title=Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="https://wiki.cheatengine.org/index.php?title=Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help-mediawiki"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help about MediaWiki</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Tools</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="https://wiki.cheatengine.org/index.php?title=Special:WhatLinksHere/Tutorials:Lua:ObjectOriented" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="https://wiki.cheatengine.org/index.php?title=Special:RecentChangesLinked/Tutorials:Lua:ObjectOriented" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="https://wiki.cheatengine.org/index.php?title=Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-info"><a href="https://wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-" aria-labelledby="p--label">
			<h3 id="p--label"></h3>
			<div class="body">
				<br><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Wiki, left ad -->
<ins class="adsbygoogle"
     style="display:inline-block;width:120px;height:240px"
     data-ad-client="ca-pub-2965724121945476"
     data-ad-slot="0419043812"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>			</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="https://wiki.cheatengine.org/index.php?title=Cheat_Engine:Privacy_policy" title="Cheat Engine:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="https://wiki.cheatengine.org/index.php?title=Cheat_Engine:About" class="mw-redirect" title="Cheat Engine:About">About Cheat Engine</a></li>
								<li id="footer-places-disclaimer"><a href="https://wiki.cheatengine.org/index.php?title=Cheat_Engine:General_disclaimer" title="Cheat Engine:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/publicdomain/"><img src="https://wiki.cheatengine.org/resources/assets/licenses/public-domain.png" alt="Public Domain" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://wiki.cheatengine.org/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":423});});</script>
	</body>

<!-- Mirrored from wiki.cheatengine.org/index.php?title=Tutorials:Lua:ObjectOriented&action=edit&section=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Jun 2021 18:01:39 GMT -->
</html>
